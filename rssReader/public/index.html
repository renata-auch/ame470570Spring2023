<!DOCTYPE html>
<html>
    <head>
        <title> RSS Reader</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script src="asyncReq.js"></script>
        <meta viewport="width=device-width, initial-scale=1, user-scalable=no">      
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">          
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <div id="rssListWrapper">  
            <button class="btn waves-effect waves-light blue" onclick="addNew()">Add New
                <i class="material-icons left">add_circle</i>
              </button>
              <div id="rssList">
                </div>
        </div>

        <div id="itemListWrapper">
            <button class="btn waves-effect waves-light blue">Edit
                <i class="material-icons left">edit</i>
              </button>
              <button class="btn waves-effect waves-light red" style="float:right">Delete
                <i class="material-icons left">remove</i>
              </button>
                <div id="itemList">
                    </div>
        </div>

        <div id="details">
        </div>  

        
    </body>
    <script>
      function addNew(){
        var url = prompt("Enter the URL of the RSS feed you want to add");
        if(url != null){
          loadURL("/addFeed?url=" + url, function(data){
            console.log(data);
          });
        }
      }

      function loadAllFeeds(){
        loadURL("/getFeeds", function(data){
          console.log(data);
          var feeds = JSON.parse(data);
          document.getElementById("rssList").innerHTML = "";
          for(var i = 0; i < feeds.length; i++){
            var feed = feeds[i];
            var feedDiv = document.createElement("div");
            feedDiv.className = "feed";
            feedDiv.innerHTML = feed.title;
            feedDiv.onclick = function(){
              loadFeed(feed.url);
            }
            document.getElementById("rssList").appendChild(feedDiv);
          }
        });
      }
    </script>
</html>